fixed the critical bug in main
